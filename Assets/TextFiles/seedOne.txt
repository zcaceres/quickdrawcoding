var fs = require('fs');
var path = require('path');
var execFileSync = require('child_process').execFileSync;

var cwd = null;
function exec(command, args) {
  console.error('>', [command].concat(args));
  var options = {};
  if (cwd) {
    options.cwd = cwd;
  }
  return execFileSync(command, args, options).toString();
}

var isCI = !!process.env.TRAVIS_REPO_SLUG;

if (isCI) {
  var branch = process.env.TRAVIS_BRANCH || process.env.CIRCLE_BRANCH;
  var isPullRequest =
    (!!process.env.TRAVIS_PULL_REQUEST &&
      process.env.TRAVIS_PULL_REQUEST !== 'false') ||
    !!process.env.CI_PULL_REQUEST;

  if (branch !== 'master') {
    console.error('facts-tracker: Branch is not master, exiting...');
    process.exit(0);
  }
